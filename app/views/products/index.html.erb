<% content_for :breadcrumbs do %>
	<div id="breadcrumbs">
		<ul class="breadcrumb">
			<li><i class="icon-home"></i><a href="<%= root_path %>">Home</a><span class="divider"><i class="icon-angle-right"></i></span></li>
			<li class="active">My Servers<span class="divider"></span></li>
		</ul>
	</div>
<% end %>

<% content_for :header do %>
	<div class="page-header position-relative">
		<%= link_to "Launch New Server", launch_server_path, class: "btn btn-primary btn-small", style: "float: right;" %>
		<h1>My Servers</h1>
	</div><!--/page-header-->
<% end %>

<div class="row-fluid">
	<span class="span12">
		<table id="table_report" class="table table-striped table-bordered table-hover">
			<thead>
				<tr>
					<th>Name</th>
					<th class='hidden-480'>Server ID</th>
					<%if AppConfig.cloud[:name] == "AWS"%>
						<th class='hidden-phone'>Server Type</th>
					<%elsif AppConfig.cloud[:name] == "DigitalOcean"%>
						<th class='hidden-phone'>Size Type</th>
					<%end%>
					<th>Launch Time</th>
					<th class='hidden-480'>Cost</th>
					<th class='hidden-480'>Status</th>
					<th class="center">Actions</th>
				</tr>
			</thead>

			<tbody>
				<% @products.each do |instance| %>
					<tr>
						<td><%= instance.name %></td>
						<td class='hidden-480'><%= instance.product_id %></td>
						<%if AppConfig.cloud[:name] == "AWS"%>
							<td class='hidden-phone'><%= instance.product_type %></td>
						<%elsif AppConfig.cloud[:name] == "DigitalOcean"%>
							<td class='hidden-phone'><%= SizeType.find_by_size_id(instance.size_type).name %></td>
						<%end%>
						<td><%= instance.launch_time %></td>
						<td class='hidden-480'><%= instance.cost %></td>
						<% inst_state = instance.status || "unknown" %>
						<td class='hidden-480'>
							<%= content_tag :span, class: instance_state_class(inst_state) do %>
								<%= inst_state.camelize %>
							<% end %>
						</td>
						<td class="center">
							<div class="inline position-relative">
								<button class="btn btn-minier btn-primary dropdown-toggle" data-toggle="dropdown"><i class="icon-cog icon-only"></i></button>
									<ul class="dropdown-menu dropdown-icon-only dropdown-light pull-right dropdown-caret dropdown-close">
										<li><a href="<%= server_path(instance) %>" class="btn btn-mini btn-info" data-rel="tooltip" title="View Details"><i class="icon-list icon-only"></i></a></li>
										<li>
											<% unless inst_state == 'terminated'%>
												<%= link_to server_path(instance),confirm: 'Are you sure?', method: :delete do %>
												<span class="red"><i class="icon-trash"></i></span>
												<% end %>
											<% end %>
										</li>
									</ul>
							</div>
						</td>
					</tr>
				<% end %>
			</tbody>
		</table>
	</span>
</div>

<% content_for :page_scripts do %>
	<%= javascript_include_tag "jquery.dataTables.min", "jquery.dataTables.bootstrap" %>
<% end %>

<% content_for :inline_scripts do %>
	<script type="text/javascript">
		window.onload = function() {
			$('li#nav-elements').addClass('active open');
			$('li#nav-elements-instances').addClass('active');
		};
	</script>
<% end %>